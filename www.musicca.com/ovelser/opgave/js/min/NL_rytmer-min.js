var MusikipediaNL_rytmer=function(){"use strict";let e,t,a,i,n,o,s,r=null,u=!1;var h=function(s){let r={beforeTactusBeat:90,beforeOtherBeat:40,afterTactusBeat:90,afterOtherBeat:40};const u=new URLSearchParams(window.location.search);if(u.has("tl")){var h=u.get("tl").split("-");4===h.length&&(r.beforeTactusBeat=parseInt(h[0]),r.beforeOtherBeat=parseInt(h[1]),r.afterTactusBeat=parseInt(h[2]),r.afterOtherBeat=parseInt(h[3]))}e=new MusikipediaRhythmImage({elementToWhichTheRhythmImageAreCreated:document.getElementById("spoergsmaal"),zoom:l(),editMode:!1,swingText:s.swingText,resizeFunction:p}),MusikipediaRhythmPlayer.initialisation({unitsPerStep:s.greatestCommonLevelLength,elementWithButton:document.getElementById("afspil-lyd"),includeCountIn:!0,includePlaying:!1,includeTapping:!0,includeCountOut:!0,beforePlayingCallback:m,afterStoppingCallback:c,changeStatusCallback:g,beforeChangeStatusCallback:B,finishedTappingCallback:I,countInCallback:y,rhythmImage:e,tapToleranceLimits:r}),t=s.tapText,a=s.wrongText,i=s.correctText,n=s.getReadyText,o=s.clickPlayButtonToStartText,e.createInfoBox(f,s.naesteSpoergsmaal,x),e.setInfoBoxText(o),e.setInfoBoxImage(),e.setInfoBoxState(),MusikipediaOpgave.skrivRespons()},l=function(){return window.innerWidth>800?.6:.4*window.innerWidth/800+.2},f=function(e){e.preventDefault(),MusikipediaRhythmPlayer.tap()},p=function(t){e.setZoom(l())},m=function(){e.removeAllLabels()},c=function(){e.setInfoBoxText(o),e.setInfoBoxState(),e.setInfoBoxImage(),u=!1},d=function(){MusikipediaRhythmPlayer.shutDown()},g=function(a){switch(a){case"countin":e.removeAllLabels(),u&&(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal(k),e.setRhythm(s),MusikipediaRhythmPlayer.setRhythm(e.getRhythm())),u=!1,e.setInfoBoxState(),e.setInfoBoxText(n),e.setInfoBoxImage("1");break;case"tap":e.setInfoBoxState(),e.setInfoBoxText(t),e.setInfoBoxImage("tap");break;case"countout":break;case"stop":e.setInfoBoxState(),e.setInfoBoxText(o),e.setInfoBoxImage()}},y=function(t){e.setInfoBoxImage(t)},B=function(e,t){"countin"===e&&MusikipediaOpgave.userHasAnsweredTheRequiredNumberOfQuestionsCorrectly()&&MusikipediaRhythmPlayer.removeMetronome()},I=function(){if(MusikipediaRhythmPlayer.atLeastOneNoteWasWrongDuringTapping()){MusikipediaOpgave.forkertSvar(),e.setInfoBoxText(a),e.setInfoBoxState("÷"),MusikipediaRhythmPlayer.skipCountOut();MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3?e.setInfoBoxImage("1"):(MusikipediaRhythmPlayer.stop(),MusikipediaRhythmPlayer.hideButton(),e.showNextQuestionButton(!0),e.setInfoBoxText(n),e.setInfoBoxImage("1"),e.setInfoBoxState())}else MusikipediaOpgave.rigtigtSvar(),e.setInfoBoxText(i),e.setInfoBoxImage(""),e.setInfoBoxState("√"),u=!0},x=function(){e.setInfoBoxText(n),e.setInfoBoxImage("1"),e.setInfoBoxState(),MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal(k)},k=function(){MusikipediaRhythmPlayer.stop()},T=function(e,t){if(null===e||null===t)return!1;{const a=new MusikipediaRhythm(e),i=new MusikipediaRhythm(t);return a.isEqualTo(i)}},M=function(t){s=null===r?new MusikipediaRhythm(t):r,e.setRhythm(s);const a=e.getRhythm();MusikipediaRhythmPlayer.setRhythm(a),s.metricalStructure.tempo>65?MusikipediaRhythmPlayer.setToleranceLimits({beforeTactusBeat:100,beforeOtherBeat:70,afterTactusBeat:100,afterOtherBeat:70}):MusikipediaRhythmPlayer.setToleranceLimits({beforeTactusBeat:140,beforeOtherBeat:90,afterTactusBeat:140,afterOtherBeat:90}),e.showInfoBox(!0),MusikipediaRhythmPlayer.showButton(),MusikipediaRhythmPlayer.setMarkNotesDuringTapping(!1)},R=function(e){r=new MusikipediaRhythm(e)};return{initialisering:function(){MusikipediaOpgave.initialisering("NL_rytmer",h,T,M,R,d)}}}();window.addEventListener("load",MusikipediaNL_rytmer.initialisering());