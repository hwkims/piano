var MusikipediaKS_skalaer=function(){"use strict";var a,e,r,i=function(){MusikipediaOpgave.initialisering("KS_skalaer",n,t,s)},n=function(e){r=e.overskrift,a=new MusikipediaKlaviatur({elementSomKlaviaturetSkalTilfoejes:document.getElementById("spoergsmaal"),skrivning:!0,maxEnTone:!1,svarfunktion:k,svarknaptekst:e.svarknapNodesystem,tilladSvarKunMedLaasteTangenter:!0})},t=function(a,e){return null!==a&&null!==e&&(a.skala.grundtone.afstandIHalvtonerFraC0%12==e.skala.grundtone.afstandIHalvtonerFraC0%12&&a.skala.skalatype===e.skala.skalatype)},s=function(i){e=i,document.getElementById("opgaveoverskrift").innerHTML=r.replace("@",i.skala.navn),a.slaaSkrivningTil(!0),i.skala.grundtone.laast=!0,a.saetSamklang([e.skala.grundtone]),a.goerSvarknapUtilgaengelig()},k=function(){var r,i,n,t,s,k,g,l,v,p;for(r=a.samklang().toner,n=(i=new MusikipediaSamklang(e.skala.samklang)).toner.length,t=0;t<n;t++)i.toner[t].markering="forkertTone";for(s=0,n=r.length,p=!1,t=0;t<n;t++)k=r[t],null===(g=i.tonePaaSammeTangent(k))&&e.skala.grundtone.afstandIHalvtonerFraC0===k.afstandIHalvtonerFraC0-12&&(g=i.tonePaaSammeTangent({afstandIHalvtonerFraC0:k.afstandIHalvtonerFraC0-12})),null===g?(k.markering="forkertTone",s++):(k.laast=!0,k.markering="rigtigTone",g.markering="rigtigTone",e.skala.grundtone.afstandIHalvtonerFraC0===k.afstandIHalvtonerFraC0-12&&(p=!0));for(l=0,t=0;t<i.toner.length;t++)"forkertTone"===i.toner[t].markering&&l++;l>0&&!p&&l++,0===s&&0===l?(MusikipediaOpgave.rigtigtSvar(),a.saetSamklang(r),a.blinkForRigtigSvar(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal)):(MusikipediaOpgave.forkertSvar(),a.saetSamklang(r),v=MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3,s>0?l>0?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):1===s?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget_SeDetRigtigeSvar):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget.replace("#",s)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget_SeDetRigtigeSvar.replace("#",s)):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt.replace("#",l)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt_SeDetRigtigeSvar.replace("#",l)),v?a.angivForkertSvar():a.blinkForForkertSvar(function(){a.slaaSkrivningTil(!1),MusikipediaOpgave.visVissvarknap(o)}))},o=function(){var r,i;for(i=e.skala.samklang.length,r=0;r<i;r++)e.skala.samklang[r].markering="rigtigTone";e.skala.samklang.push({afstandIHalvtonerFraC0:e.skala.grundtone.afstandIHalvtonerFraC0+12,markering:"rigtigTone"}),a.saetSamklang(e.skala.samklang)};return{initialisering:i}}();window.addEventListener("load",MusikipediaKS_skalaer.initialisering());