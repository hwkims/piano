var MusikipediaKS_akkorder=function(){"use strict";var e,a,r,i=function(a){r=a.overskrift,e=new MusikipediaKlaviatur({elementSomKlaviaturetSkalTilfoejes:document.getElementById("spoergsmaal"),skrivning:!0,maxEnTone:!1,svarfunktion:k,svarknaptekst:a.svarknapNodesystem,tilladSvarKunMedLaasteTangenter:!0})},n=function(e,a){return null!==e&&null!==a&&(e.akkord.akkordtype===a.akkord.akkordtype&&e.akkord.grundtone.afstandIHalvtonerFraC0%12==a.akkord.grundtone.afstandIHalvtonerFraC0%12)},t=function(i){a=i,document.getElementById("opgaveoverskrift").innerHTML=r.replace("@",a.akkord.becifringSomHtml),e.slaaSkrivningTil(!0),a.akkord.grundtone.laast=!0,e.saetSamklang([a.akkord.grundtone]),e.goerSvarknapUtilgaengelig()},k=function(){var r,i,n,t,k,s,g,d,p,v;for(i=e.samklang().toner,n=new MusikipediaSamklang(a.akkord.toner),t=n.toner.length,k=0;k<t;k++)n.toner[k].markering="forkertTone";for(d=!0,t=i.length,k=0;k<t;k++)s=i[k],g=n.tonePaaSammeTangentUansetOktav(s),null===g?(d=!1,s.markering="forkertTone"):(s.laast=!0,s.markering="rigtigTone",g.markering="rigtigTone");for(p=0,k=0;k<n.toner.length;k++)"forkertTone"===n.toner[k].markering&&p++;d&&0===p?(MusikipediaOpgave.rigtigtSvar(),e.saetSamklang(i),e.blinkForRigtigSvar(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal)):(MusikipediaOpgave.forkertSvar(),e.saetSamklang(i),v=MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3,d?1===p?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt_SeDetRigtigeSvar):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt.replace("#",p)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt_SeDetRigtigeSvar.replace("#",p)):t<=a.akkord.toner.length?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):t-a.akkord.toner.length==1?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget_SeDetRigtigeSvar):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget.replace("#",t-a.akkord.toner.length)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget_SeDetRigtigeSvar.replace("#",t-a.akkord.toner.length)),v?e.angivForkertSvar():e.blinkForForkertSvar(function(){e.slaaSkrivningTil(!1),MusikipediaOpgave.visVissvarknap(o)}))},o=function(){var r,i;for(i=a.akkord.toner.length,r=0;r<i;r++)a.akkord.toner[r].markering="rigtigTone";e.saetSamklang(a.akkord.toner)};return{initialisering:function(){MusikipediaOpgave.initialisering("KS_akkorder",i,n,t)}}}();window.addEventListener("load",MusikipediaKS_akkorder.initialisering());