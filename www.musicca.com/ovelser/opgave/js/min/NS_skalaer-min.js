var MusikipediaNS_skalaer=function(){"use strict";var e,a,i,r,n=function(a){i=a.overskrift,r=a.maksimaltAntalToner,e=new MusikipediaNodebillede({elementSomNodebilledetSkalTilfoejes:document.getElementById("spoergsmaal"),skrivning:!0,fortegnsknapper:a.tekstForFortegnsknapper,maxEnTonePrPosition:!0,svarfunktion:o,svarknaptekst:a.svarknapNodesystem,tilladSvarKunMedLaasteNoder:!0}),e.saetNoegle("g")},s=function(e,a){return null!==e&&null!==a&&(e.skala.grundtone.stamtone===a.skala.grundtone.stamtone&&e.skala.grundtone.fortegn===a.skala.grundtone.fortegn&&e.skala.skalatype===a.skala.skalatype)},t=function(n){var s;for(a=n,document.getElementById("opgaveoverskrift").innerHTML=i.replace("@",n.skala.navn),e.slaaSkrivningTil(!0),n.skala.grundtone.laast=!0,s=[[n.skala.grundtone]];s.length<r;)s.push([]);e.saetToneserie(s),e.toneserieObjekt().samklange[0].laast=!0,e.goerSvarknapUtilgaengelig()},o=function(){var i,r,n,s,t,o,g,l,p;for(i=new MusikipediaToneserie(e.toneserie(!0)),i.fjernTommeSamklange(),i=i.toneserie(),t=0,s=a.skala.toneserie.length,n=i.length,r=0;r<n;r++)o=i[r][0],r>=s?(o.markering="forkertTone",t++):(g=new MusikipediaTone(a.skala.toneserie[r][0]),o.sammeTone(g)?(o.laast=!0,o.markering="rigtigTone"):"bl"===a.skala.skalatype&&3===r&&o.afstandIHalvtonerFraC0()===g.afstandIHalvtonerFraC0?(o.laast=!0,o.markering="rigtigTone"):(o.markering="forkertTone",t++));for(;i.length<a.skala.toneserie.length;)i.push([]);for(e.saetToneserie(i),r=0;r<n;r++)1===e.toneserieObjekt().samklange[r].antal(!0)&&0===e.toneserieObjekt().samklange[r].antal(!1)&&(e.toneserieObjekt().samklange[r].laast=!0);l=s-n,0!==t||0!==l&&1!==l?(MusikipediaOpgave.forkertSvar(),p=MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3,t>0?p?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):l>1?p?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt.replace("#",l)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt_SeDetRigtigeSvar.replace("#",l)):l<0&&(-1===l?p?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget_SeDetRigtigeSvar):p?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget.replace("#",-l)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget_SeDetRigtigeSvar.replace("#",-l))),p?e.angivForkertSvar():e.blinkForForkertSvar(function(){e.slaaSkrivningTil(!1),MusikipediaOpgave.visVissvarknap(k)})):(MusikipediaOpgave.rigtigtSvar(),e.blinkForRigtigSvar(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal))},k=function(){var i,r,n,s;for(r=a.skala.toneserie.length,i=0;i<r;i++)for(s=a.skala.toneserie[i].length,n=0;n<s;n++)a.skala.toneserie[i][n].markering="rigtigTone";e.saetToneserie(a.skala.toneserie,!0)};return{initialisering:function(){MusikipediaOpgave.initialisering("NS_skalaer",n,s,t)}}}();window.addEventListener("load",MusikipediaNS_skalaer.initialisering());