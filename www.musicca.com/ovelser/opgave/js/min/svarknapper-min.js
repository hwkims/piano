var MusikipediaSvarknapper=function(){"use strict";var e=null,a=[],t=null,s=[],i=null,l=600,r=function(e){var i,l,r,n,d;for(a=[],s=[],r=e.length,i="",l=0;l<r;l++)"*"===(n=e[l]).tekst?i+="<br />":"/"===n.tekst?i+="<br class='newline_big' />":""===n.tekst?i+='<button class="svarknap'+(n.dobbeltbredde?" dobbeltknapbredde":"")+(""==n.klasse?"":" "+n.klasse)+'" style="visibility:hidden" id="svar'+l+'" value=""></button>':(i+='<button class="svarknap'+(n.dobbeltbredde?" dobbeltknapbredde":"")+(n.aktiv?" aktiv":"")+(""==n.klasse?"":" "+n.klasse)+'" id="svar'+l+'" value="'+n.vaerdi+'" '+(n.aktiv?"":"disabled")+">"+n.tekst+"</button>",a.push(n));for(t.innerHTML=i,l=0;l<r;l++)null!==(d=document.getElementById("svar"+l))&&""!==e[l].tekst&&(s.push(d),d.addEventListener("click",v))};function n(a){var t,i,l;if(1===a.key.length){for(l=null,t=s.length,i=0;i<t;i++)if(s[i]&&!s[i].disabled&&s[i].innerText.substring(0,1).toLowerCase()===a.key.toLowerCase()){if(null!==l){l=null;break}l=s[i]}null!==l&&(u(),e(l.value,MusikipediaOpgave.aktueltSpoergsmaal())?(d(l),MusikipediaOpgave.rigtigtSvar(),o(l,1)):(l.disabled=!0,MusikipediaOpgave.forkertSvar(),c(l,1)))}}var d=function(){for(var e=s.length,a=0;a<e;a++)s[a]&&(s[a].disabled=!0)},u=function(){var e=s.length;null!==i&&(clearTimeout(i),i=null);for(var a=0;a<e;a++)s[a]&&(s[a].className=s[a].className.replace(/(?:^|\s)fravalgt(?!\S)/g,""),s[a].className=s[a].className.replace(/(?:^|\s)forkert(?!\S)/g,""),s[a].className=s[a].className.replace(/(?:^|\s)rigtigt(?!\S)/g,""))},c=function(e,a){e.className.match(/(?:^|\s)forkert(?!\S)/)?e.className=e.className.replace(/(?:^|\s)forkert(?!\S)/g,""):e.className+=" forkert",a>0?i=setTimeout((function(){c(e,a-1)}),600):e.className+=" fravalgt"},o=function(e,t){e.className.match(/(?:^|\s)rigtigt(?!\S)/)?e.className=e.className.replace(/(?:^|\s)rigtigt(?!\S)/g,""):e.className+=" rigtigt",t>0?i=setTimeout((function(){o(e,t-1)}),l):(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal(),function(){u();for(var e=s.length,t=0;t<e;t++)s[t]&&(s[t].disabled=!a[t].aktiv)}())},v=function(){u(),e(this.value,MusikipediaOpgave.aktueltSpoergsmaal())?(d(this),MusikipediaOpgave.rigtigtSvar(),o(this,1)):(this.disabled=!0,MusikipediaOpgave.forkertSvar(),c(this,1))};return{initialisering:function(a,s,i,l){e=s;let d=document.createElement("div");d.className="svarknapfelt",(t=document.createElement("div")).className="svarknapper "+(void 0!==l?l:""),d.appendChild(t),void 0!==i?i.appendChild(d):document.getElementById("svarknapper").appendChild(d),r(a),document.addEventListener("keydown",n)},skiftSvarknapper:r,visRigtigtSvarILangTid:function(){l=2e3}}}();