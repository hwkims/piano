var MusikipediaNS_akkorder=function(){"use strict";var e,r,a,i=function(a){e=a.overskrift,r=new MusikipediaNodebillede({elementSomNodebilledetSkalTilfoejes:document.getElementById("spoergsmaal"),skrivning:!0,fortegnsknapper:a.tekstForFortegnsknapper,maxEnTonePrPosition:!1,svarfunktion:o,svarknaptekst:a.svarknapNodesystem,tilladSvarKunMedLaasteNoder:!0}),r.saetNoegle(a.noegle)},n=function(e,r){return null!==e&&null!==r&&(e.akkord.akkordtype===r.akkord.akkordtype&&e.akkord.grundtone.stamtone===r.akkord.grundtone.stamtone&&e.akkord.grundtone.fortegn===r.akkord.grundtone.fortegn)},t=function(i){a=i,document.getElementById("opgaveoverskrift").innerHTML=e.replace("@",a.akkord.becifringSomHtml),r.slaaSkrivningTil(!0),a.akkord.grundtone.laast=!0,r.saetToneserie([[a.akkord.grundtone]]),r.saetMinAfstandIStamtonerFraC0(a.akkord.grundtone.afstandIStamtonerFraC0+1),r.goerSvarknapUtilgaengelig()},o=function(){var e,i,n,t,o,s,g,d,p,v;for(e=r.toneserie(!0),i=e[0],n=new MusikipediaSamklang(a.akkord.toner),t=n.toner.length,o=0;o<t;o++)n.toner[o].markering="forkertTone";for(d=!0,t=i.length,o=0;o<t;o++)s=i[o],g=n.toneMedSammeStamtoneUansetOktavOgFortegnSom(s),null===g?(d=!1,s.markering="forkertTone"):(s.laast=!0,s.markering="rigtigTone",g.markering="rigtigTone");for(p=0,o=0;o<n.toner.length;o++)"forkertTone"===n.toner[o].markering&&p++;d&&0===p?(MusikipediaOpgave.rigtigtSvar(),r.saetToneserie(e),r.blinkForRigtigSvar(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal)):(MusikipediaOpgave.forkertSvar(),r.saetToneserie(e),v=MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3,d?1===p?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt_SeDetRigtigeSvar):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt.replace("#",p)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt_SeDetRigtigeSvar.replace("#",p)):t<=a.akkord.toner.length?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):t-a.akkord.toner.length==1?v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForMeget_SeDetRigtigeSvar):v?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget.replace("#",t-a.akkord.toner.length)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForMeget_SeDetRigtigeSvar.replace("#",t-a.akkord.toner.length)),v?r.angivForkertSvar():r.blinkForForkertSvar(function(){r.slaaSkrivningTil(!1),MusikipediaOpgave.visVissvarknap(k)}))},k=function(){var e,i;for(i=a.akkord.toner.length,e=0;e<i;e++)a.akkord.toner[e].markering="rigtigTone";r.saetToneserie([a.akkord.toner],!0)};return{initialisering:function(){MusikipediaOpgave.initialisering("NS_akkorder",i,n,t)}}}();window.addEventListener("load",MusikipediaNS_akkorder.initialisering());