var MusikipediaNS_toner=function(){"use strict";var e,a,i,r,t=function(a){i=a.overskrift,r=+a.antalOktaver,(e=new MusikipediaNodebillede({elementSomNodebilledetSkalTilfoejes:document.getElementById("spoergsmaal"),skrivning:!0,fortegnsknapper:a.tekstForFortegnsknapper,maxEnTonePrPosition:1===r,tilladSvarKunMedLaasteNoder:1!==r,svarfunktion:s,svarknaptekst:a.svarknapNodesystem})).saetNoegle(a.noegle)},n=function(e,a){return null!==e&&null!==a&&(e.tone.afstandIStamtonerFraC0===a.tone.afstandIStamtonerFraC0&&e.tone.fortegn===a.tone.fortegn)},o=function(t){a=t,document.getElementById("opgaveoverskrift").innerHTML=i.replace("@",t.tone.navn),e.slaaSkrivningTil(!0),e.saetToneserie([[]]),e.saetMaxEnTonePrPosition(1===r)};var s=function(){var i,t;1===(i=e.toneserie(!0)).length&&i[0].length>0&&(!function(){var i,t,n,o,s,p,g;if(i=!1,1===(t=e.toneserie(!0)).length&&(s=(n=t[0]).length)>0){for(i=!0,g=0,p=0;p<s;p++)(o=n[p]).afstandIStamtonerFraC0%7!=a.tone.afstandIStamtonerFraC0%7||o.fortegn!==a.tone.fortegn?(o.markering="forkertTone",i=!1):(g++,o.laast=!0,o.markering="rigtigTone");e.saetToneserie(t),i=i&&s>=r,g+1===r&&e.saetMaxEnTonePrPosition(!0)}return i}()?(MusikipediaOpgave.forkertSvar(),t=MusikipediaOpgave.antalForkerteForsoegPaaDetteSporgsmaal()<3||1!==r&&2!==r,i[0].length===r?1===r?t?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarDuHarSkrevet.replace("#",i[0][0].navn(MusikipediaOpgave.data().sprog))):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarDuHarSkrevet_SeDetRigtigeSvar.replace("#",i[0][0].navn(MusikipediaOpgave.data().sprog))):t?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):r-i[0].length==1?t?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarEnToneForLidt_SeDetRigtigeSvar):r-i[0].length<0?t?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvar_SeDetRigtigeSvar):t?MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt.replace("#",r-i[0].length)):MusikipediaOpgave.skrivRespons(MusikipediaOpgave.data().forkertSvarFlereTonerForLidt_SeDetRigtigeSvar.replace("#",r-i[0].length)),t?e.angivForkertSvar():e.blinkForForkertSvar((function(){e.slaaSkrivningTil(!1),MusikipediaOpgave.visVissvarknap(p)}))):(MusikipediaOpgave.rigtigtSvar(),e.blinkForRigtigSvar(MusikipediaOpgave.gaaVidereMedNaesteSpoergsmaal)))},p=function(){var i,r,t,n,o;for("f"===MusikipediaOpgave.data().noegle?(i=12,r=31):"c"===MusikipediaOpgave.data().noegle?(i=18,r=37):"t"===MusikipediaOpgave.data().noegle?(i=16,r=35):(i=24,r=43),t=[],o=7*Math.floor(i/7);a.tone.afstandIStamtonerFraC0+o<i;)o+=7;do{(n=new MusikipediaTone({afstandIStamtonerFraC0:a.tone.afstandIStamtonerFraC0+o,fortegn:a.tone.fortegn})).laast=!0,n.markering="rigtigTone",t.push(n),o+=7}while(a.tone.afstandIStamtonerFraC0+o<=r);e.saetToneserie([t])};return{initialisering:function(){MusikipediaOpgave.initialisering("NS_toner",t,n,o)}}}();window.addEventListener("load",MusikipediaNS_toner.initialisering());