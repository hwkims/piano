var MusikipediaToneafspilning=function(){"use strict";var e,n,t,i,a,r,o,l;function s(){l?g():v()}function f(e){"Space"!==e.code&&" "!==e.key||(l?g():v())}function u(e){var i;if(l=e)t.src=Musikipedia.mappe()+"grafik/ikoner/lydafspilles.png";else{for(i=0;i<n.length;i++)n[i].fade(1,0,50);n=[],t.src=Musikipedia.mappe()+"grafik/ikoner/afspillyd.png"}t.style.display="inline"}var d=function(){var n;if(n=!1,a)return!0;for(var t in e)e.hasOwnProperty(t)&&"loaded"!==e[t].state()&&(n=!0);return a=!n};function p(t){var i,a;for(n=[],i=0;i<t.length;i++)void 0!==(a=e[t[i].afstandIHalvtonerFraC0])&&(a.volume(1),a.play(),n.push(a))}function c(e){var t;for(t=0;t<n.length;t++)n[t].fade(1,0,250);setTimeout(p,30,e)}function v(){var e;if(d()){if(g(),u(!0),i.length>0)for(e=0;e<i.length;e++)i.length>5?r.push(setTimeout(c,500*e+10,i[e])):r.push(setTimeout(c,700*e+10,i[e]));o=i.length>1?i.length>5?setTimeout(u,500*e+500,!1):setTimeout(u,700*e+700,!1):setTimeout(u,2e3,!1)}else setTimeout(v,100)}var g=function(e){var t;for(e=void 0!==e&&e,u(!1),t=0;t<r.length;t++)clearInterval(r[t]);for(null!==o&&clearInterval(o),t=0;t<n.length;t++)e?n[t].fade(1,0,1e3):n[t].fade(1,0,500);n=[]};return{initialisering:function(i,l){var u;for(e={},r=[],a=!1,n=[],o=null,u=i.starttone.afstandIHalvtonerFraC0-1;u<=i.sluttone.afstandIHalvtonerFraC0+1;u++)e[u]=new Howl({src:["/files/audio/exercises/notes/"+(u-8)+".mp3"],preload:!0});(t=document.createElement("img")).width=32,t.height=32,t.style.display="none",l.appendChild(t),t.addEventListener("click",s),document.addEventListener("keydown",f)},afspil:function(e){i=e,v()},stop:g,alleLydeErHentet:d}}();